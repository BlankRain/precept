<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>precept.core documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Precept</span> <span class="project-version">0.3.1-alpha</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>precept</span></div></div></li><li class="depth-2 branch"><a href="precept.accumulators.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>accumulators</span></div></a></li><li class="depth-2 branch current"><a href="precept.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="precept.dsl.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>dsl</span></div></a></li><li class="depth-2 branch"><a href="precept.listeners.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>listeners</span></div></a></li><li class="depth-2 branch"><a href="precept.macros.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>macros</span></div></a></li><li class="depth-2 branch"><a href="precept.query.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>query</span></div></a></li><li class="depth-2 branch"><a href="precept.rules.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>rules</span></div></a></li><li class="depth-2 branch"><a href="precept.schema.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>schema</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>spec</span></div></div></li><li class="depth-3 branch"><a href="precept.spec.error.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>error</span></div></a></li><li class="depth-3 branch"><a href="precept.spec.lang.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>lang</span></div></a></li><li class="depth-3"><a href="precept.spec.sub.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>sub</span></div></a></li><li class="depth-2 branch"><a href="precept.state.html"><div class="inner"><span class="tree" style="top: -114px;"><span class="top" style="height: 123px;"></span><span class="bottom"></span></span><span>state</span></div></a></li><li class="depth-2"><a href="precept.util.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>util</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="precept.core.html#var-action-ch"><div class="inner"><span>action-ch</span></div></a></li><li class="depth-1"><a href="precept.core.html#var-apply-additions-to-store"><div class="inner"><span>apply-additions-to-store</span></div></a></li><li class="depth-1"><a href="precept.core.html#var-apply-additions-to-view-model.21"><div class="inner"><span>apply-additions-to-view-model!</span></div></a></li><li class="depth-1"><a href="precept.core.html#var-apply-changes-to-session"><div class="inner"><span>apply-changes-to-session</span></div></a></li><li class="depth-1"><a href="precept.core.html#var-apply-op-to-view-model.21"><div class="inner"><span>apply-op-to-view-model!</span></div></a></li><li class="depth-1"><a href="precept.core.html#var-apply-removals-to-store"><div class="inner"><span>apply-removals-to-store</span></div></a></li><li class="depth-1"><a href="precept.core.html#var-apply-removals-to-view-model.21"><div class="inner"><span>apply-removals-to-view-model!</span></div></a></li><li class="depth-1"><a href="precept.core.html#var-changes-out"><div class="inner"><span>changes-out</span></div></a></li><li class="depth-1"><a href="precept.core.html#var-default-group"><div class="inner"><span>default-group</span></div></a></li><li class="depth-1"><a href="precept.core.html#var-dispatch.21"><div class="inner"><span>dispatch!</span></div></a></li><li class="depth-1"><a href="precept.core.html#var-done-ch"><div class="inner"><span>done-ch</span></div></a></li><li class="depth-1"><a href="precept.core.html#var-groups"><div class="inner"><span>groups</span></div></a></li><li class="depth-1"><a href="precept.core.html#var-lens"><div class="inner"><span>lens</span></div></a></li><li class="depth-1"><a href="precept.core.html#var-notify.21"><div class="inner"><span>notify!</span></div></a></li><li class="depth-1"><a href="precept.core.html#var-read-changes-from-session"><div class="inner"><span>read-changes-from-session</span></div></a></li><li class="depth-1"><a href="precept.core.html#var-realized-session"><div class="inner"><span>realized-session</span></div></a></li><li class="depth-1"><a href="precept.core.html#var-register"><div class="inner"><span>register</span></div></a></li><li class="depth-1"><a href="precept.core.html#var-register-rule"><div class="inner"><span>register-rule</span></div></a></li><li class="depth-1"><a href="precept.core.html#var-removals-out"><div class="inner"><span>removals-out</span></div></a></li><li class="depth-1"><a href="precept.core.html#var-session-.3Estore"><div class="inner"><span>session-&gt;store</span></div></a></li><li class="depth-1"><a href="precept.core.html#var-start.21"><div class="inner"><span>start!</span></div></a></li><li class="depth-1"><a href="precept.core.html#var-subscribe"><div class="inner"><span>subscribe</span></div></a></li><li class="depth-1"><a href="precept.core.html#var-swap-session.21"><div class="inner"><span>swap-session!</span></div></a></li><li class="depth-1"><a href="precept.core.html#var-swap-session-sync.21"><div class="inner"><span>swap-session-sync!</span></div></a></li><li class="depth-1"><a href="precept.core.html#var-then"><div class="inner"><span>then</span></div></a></li><li class="depth-1"><a href="precept.core.html#var-trace"><div class="inner"><span>trace</span></div></a></li><li class="depth-1"><a href="precept.core.html#var-transactor"><div class="inner"><span>transactor</span></div></a></li><li class="depth-1"><a href="precept.core.html#var-update-session-history"><div class="inner"><span>update-session-history</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">precept.core</h1><div class="doc"><div class="markdown"></div></div><div class="public anchor" id="var-action-ch"><h3>action-ch</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-apply-additions-to-store"><h3>apply-additions-to-store</h3><div class="usage"><code>(apply-additions-to-store in)</code></div><div class="doc"><div class="markdown"><p>Reads ops from channel and applies additions to store</p></div></div></div><div class="public anchor" id="var-apply-additions-to-view-model.21"><h3>apply-additions-to-view-model!</h3><div class="usage"><code>(apply-additions-to-view-model! tuples)</code></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-apply-changes-to-session"><h3>apply-changes-to-session</h3><div class="usage"><code>(apply-changes-to-session in)</code></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-apply-op-to-view-model.21"><h3>apply-op-to-view-model!</h3><h4 class="type">multimethod</h4><div class="usage"></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-apply-removals-to-store"><h3>apply-removals-to-store</h3><div class="usage"><code>(apply-removals-to-store in)</code></div><div class="doc"><div class="markdown"><p>Reads ops from in channel and applies removals to store</p></div></div></div><div class="public anchor" id="var-apply-removals-to-view-model.21"><h3>apply-removals-to-view-model!</h3><div class="usage"><code>(apply-removals-to-view-model! tuples)</code></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-changes-out"><h3>changes-out</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-default-group"><h3>default-group</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-dispatch.21"><h3>dispatch!</h3><div class="usage"><code>(dispatch! f)</code></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-done-ch"><h3>done-ch</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-groups"><h3>groups</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-lens"><h3>lens</h3><div class="usage"><code>(lens a path)</code></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-notify.21"><h3>notify!</h3><div class="usage"><code>(notify! sub-name update-fn)</code></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-read-changes-from-session"><h3>read-changes-from-session</h3><div class="usage"><code>(read-changes-from-session in)</code></div><div class="doc"><div class="markdown"><p>Reads changes from session channel, fires rules, and puts resultant changes on changes channel. Updates session state atom with new session.</p></div></div></div><div class="public anchor" id="var-realized-session"><h3>realized-session</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-register"><h3>register</h3><div class="usage"><code>(register req)</code></div><div class="doc"><div class="markdown"><p>Should only get called by <code>subscribe</code>, which determines if a sub exists.</p>
<p>Generates an id used to track requests and responses throughout the system.</p>
<p><code>req</code> is a vector of name and params (currently we just support a name). Inserts subscription request into the current session. Responses are generated by subscription handler rules that match request name and insert facts into working memory. Subscriptions are stored in (:subscriptions @state). The lens is a reagent cursor that observes changes to the subscription’s response that is written to the store.</p></div></div></div><div class="public anchor" id="var-register-rule"><h3>register-rule</h3><div class="usage"><code>(register-rule type lhs rhs)</code></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-removals-out"><h3>removals-out</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-session-.3Estore"><h3>session-&gt;store</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-start.21"><h3>start!</h3><div class="usage"><code>(start! {:keys [session facts], :as options})</code></div><div class="doc"><div class="markdown"><p>Initializes session with facts.</p>
<ul>
  <li>:session - the <code>session</code> from which changes will be tracked</li>
  <li>:facts - initial facts</li>
</ul>
<p>Once initialized, facts are synced to a reagent ratom (<code>state/store</code>) and accessed via subscriptions.</p></div></div></div><div class="public anchor" id="var-subscribe"><h3>subscribe</h3><div class="usage"><code>(subscribe req)</code></div><div class="doc"><div class="markdown"><p>Returns lens that points to a path in the store. Sub is handled by a rule.</p></div></div></div><div class="public anchor" id="var-swap-session.21"><h3>swap-session!</h3><div class="usage"><code>(swap-session! next)</code></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-swap-session-sync.21"><h3>swap-session-sync!</h3><div class="usage"><code>(swap-session-sync! next f)</code></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-then"><h3>then</h3><div class="usage"><code>(then facts)</code></div><div class="doc"><div class="markdown"><p>Inserts facts into current session</p></div></div></div><div class="public anchor" id="var-trace"><h3>trace</h3><div class="usage"><code>(trace &amp; args)</code></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-transactor"><h3>transactor</h3><div class="usage"><code>(transactor)</code></div><div class="doc"><div class="markdown"></div></div></div><div class="public anchor" id="var-update-session-history"><h3>update-session-history</h3><div class="usage"><code>(update-session-history session)</code></div><div class="doc"><div class="markdown"><p>First history entry is most recent</p></div></div></div></div></body></html>